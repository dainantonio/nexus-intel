<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS INTEL | V6.7</title>
    
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">

    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
</head>
<body>

    <header class="app-header">
        <div class="logo-area">
            <div class="logo-icon"><i data-lucide="aperture"></i></div>
            <div class="logo-text">NEXUS INTEL <span style="font-weight:400; opacity:0.5; font-size:0.8em;">v6.7</span></div>
        </div>

        <div class="search-container">
            <i data-lucide="search" class="search-icon"></i>
            <input type="text" class="search-input" id="globalSearch" placeholder="Command + K to search..." onkeyup="handleSearch(this.value)">
        </div>

        <div style="display: flex; gap: 4px; align-items: center;">
            <div style="font-family:var(--font-mono); font-size:0.75rem; margin-right: 12px;" id="clock">00:00 UTC</div>

            <button class="action-btn refresh-btn" id="refreshBtn" title="Continuous Refresh (30s)" onclick="toggleAutoRefresh()">
                <i data-lucide="rotate-cw"></i>
            </button>
            <button class="action-btn zen-toggle" id="zenToggle" title="Zen Mode" onclick="toggleZenMode()">
                <i data-lucide="eye"></i>
            </button>
            <button class="action-btn" title="Settings" onclick="toggleSettings()"><i data-lucide="sliders-horizontal"></i></button>
            <button class="action-btn" title="Alerts" onclick="toggleAlerts()"><i data-lucide="bell"></i></button>
        </div>
    </header>

    <div class="signal-ticker">
        <div class="ticker-content">
            <div class="ticker-item">SSI RAISES $5B @ $15B VAL</div>
            <div class="ticker-item">NVIDIA B200 SHIPPING Q2</div>
            <div class="ticker-item">OPENAI "OPERATOR" RELEASED TO BETA</div>
            <div class="ticker-item">ANTHROPIC PUBLISHES CONSTITUTION 2.0</div>
            <div class="ticker-item">TSMC 2NM YIELDS EXCEED TARGET</div>
        </div>
    </div>

    <div class="intelligence-aggregator">
        <div>
            <div class="agg-label">Global Threat Level</div>
            <div class="agg-value">MODERATE <span class="agg-sub">STABLE</span></div>
        </div>
        <div class="confidence-bar-container">
            <div class="confidence-header">
                <span>SYSTEM CONFIDENCE</span>
                <span>94%</span>
            </div>
            <div class="confidence-track">
                <div class="confidence-fill"></div>
            </div>
        </div>
    </div>

    <div class="app-container">
        
        <aside class="left-sidebar">
            <div>
                <div class="sidebar-header"><i data-lucide="globe"></i> GLOBAL INTEL</div>
                <div style="position:relative;">
                    <div id="miniMap"></div>
                    <div class="intel-list" id="globalIntelList">
                        </div>
                </div>
            </div>

            <div>
                <div class="sidebar-header"><i data-lucide="activity"></i> MARKET PULSE</div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:8px;">
                    <div style="background:rgba(255,255,255,0.03); padding:8px; border-radius:4px;">
                        <div style="font-size:0.65rem; color:var(--text-muted);">SENTIMENT</div>
                        <div style="color:var(--accent-green); font-family:var(--font-mono); font-weight:700;">BULLISH</div>
                    </div>
                    <div style="background:rgba(255,255,255,0.03); padding:8px; border-radius:4px;">
                        <div style="font-size:0.65rem; color:var(--text-muted);">SEED VOL</div>
                        <div style="color:var(--text-primary); font-family:var(--font-mono);">$4.2B</div>
                    </div>
                </div>
                <div style="margin-top:10px; height: 60px; background:rgba(255,255,255,0.03); border-radius:4px; display:flex; align-items:center; justify-content:center; color:var(--text-muted); font-size:0.7rem;">
                    [Market Trend Sparkline]
                </div>
            </div>
            
            <div>
                 <div class="sidebar-header"><i data-lucide="hash"></i> ACTIVE VECTORS</div>
                 <div style="display:flex; flex-direction:column; gap:6px;">
                     <span style="font-size:0.8rem; color:var(--text-secondary);">#GenerativeBiology</span>
                     <span style="font-size:0.8rem; color:var(--text-secondary);">#AgenticWorkflows</span>
                     <span style="font-size:0.8rem; color:var(--text-secondary);">#SovereignCompute</span>
                 </div>
            </div>
        </aside>

        <main class="main-feed">
            <div class="view-nav">
                <div class="nav-tabs">
                    <button class="nav-tab active" onclick="switchView('feed')">Intel Feed</button>
                    <button class="nav-tab" onclick="switchView('startups')">Seed Scout</button>
                    <button class="nav-tab" onclick="switchView('graph')">Nexus Graph</button>
                    <button class="nav-tab" onclick="switchView('heatmap')">Heat Map</button>
                </div>
                </div>

            <div class="feed-controls">
                <span class="filter-chip active" onclick="filterFeed('All', this)">All Sources</span>
                <span class="filter-chip" onclick="filterFeed('Data Center', this)">Data Center</span>
                <span class="filter-chip" onclick="filterFeed('AI', this)">AI</span>
                <span class="filter-chip" onclick="filterFeed('Policy', this)">Policy</span>
                
                <div class="tldr-toggle" id="tldrToggle" onclick="toggleTLDR()">
                    <i data-lucide="zap" style="width:12px;"></i> AI SUMMARY
                </div>
            </div>

            <div id="feedView" class="view-container active">
                <div class="intel-brief-card" id="intelBrief">
                    <div class="brief-header">
                        <i data-lucide="sparkles" style="color:var(--accent-purple)"></i>
                        <span class="brief-title">Intelligence Brief</span>
                        <span class="brief-badge">DAILY DIGEST</span>
                    </div>
                    <div class="brief-content" id="briefContent">
                        Generative infrastructure capital expenditure is accelerating despite supply chain bottlenecks. 
                        Key signal detection indicates a shift towards "Sovereign Compute" initiatives in EU/MENA regions.
                    </div>
                    <div class="brief-points" id="briefPoints">
                        <div class="brief-point"><i data-lucide="arrow-right"></i> <span>Hardware scarcity driving 40% premium on H100 secondary markets.</span></div>
                        <div class="brief-point"><i data-lucide="arrow-right"></i> <span>Regulatory arbitrage emerging as primary driver for HQ relocation.</span></div>
                    </div>
                </div>

                <div id="feedContainer"></div>
            </div>

            <div id="startupsView" class="view-container">
                <div style="margin-bottom:1.5rem;">
                    <h2 style="font-weight:600; font-size:1.2rem; margin-bottom:4px;">Deal Flow: Series Seed+</h2>
                    <p style="color:var(--text-muted); font-size:0.85rem;">High-signal opportunities sorted by Nexus Score.</p>
                </div>
                <div class="startup-grid" id="startupGrid"></div>
            </div>

            <div id="graphView" class="view-container">
                <div id="knowledgeGraph"></div>
            </div>

            <div id="heatmapView" class="view-container">
                <h2 style="font-weight:600; font-size:1.2rem; margin-bottom:1rem;">Sector Performance Heatmap</h2>
                <div id="heatMapContainer"></div>
            </div>
        </main>

        <aside class="right-sidebar">
            <div>
                <div class="sidebar-header"><i data-lucide="trending-up"></i> MARKET WATCH</div>
                <div class="market-list" id="marketWatchList">
                    </div>
            </div>

            <div>
                <div class="sidebar-header"><i data-lucide="pie-chart"></i> IMPACT DISTRIBUTION</div>
                <div id="impactChart" style="min-height: 200px;"></div>
            </div>
        </aside>

    </div>

    <div class="modal-overlay" id="settingsModal" onclick="if(event.target === this) toggleSettings()">
        <div class="settings-modal">
            <div class="modal-header">
                <h3 style="font-size:1rem; font-weight:600; display:flex; gap:10px; align-items:center;">
                    <i data-lucide="settings"></i> System Configuration
                </h3>
                <button class="action-btn" onclick="toggleSettings()"><i data-lucide="x"></i></button>
            </div>
            
            <div class="modal-body">
                <div class="settings-section">
                    <div class="settings-section-title"><i data-lucide="monitor"></i> Interface</div>
                    <div class="setting-row">
                        <span style="font-size:0.9rem;">Cyberpunk Mode</span>
                        <div class="toggle-switch" id="cyberpunkToggle" onclick="toggleCyberpunk()"></div>
                    </div>
                    <div class="setting-row">
                        <span style="font-size:0.9rem;">Light Mode</span>
                        <div class="toggle-switch" id="lightModeToggle" onclick="toggleLightMode()"></div>
                    </div>
                    <div class="setting-row">
                        <span style="font-size:0.9rem;">Sentiment Heatmap</span>
                        <div class="toggle-switch" id="sentimentToggle" onclick="toggleSentimentOverlay()"></div>
                    </div>
                </div>

                <div class="settings-section">
                    <div class="settings-section-title"><i data-lucide="rss"></i> Data Streams</div>
                    <div class="api-input-group">
                        <label class="api-input-label">NewsAPI Key</label>
                        <div class="api-input-wrapper"><input type="password" class="api-input" placeholder="Enter NewsAPI key..." id="key-newsapi"></div>
                    </div>
                    <div class="api-input-group">
                        <label class="api-input-label">GNews API Key</label>
                        <div class="api-input-wrapper"><input type="password" class="api-input" placeholder="Enter GNews key..." id="key-gnews"></div>
                    </div>
                    <div class="api-input-group">
                        <label class="api-input-label">Finnhub API Key (Stock Ticker)</label>
                        <div class="api-input-wrapper"><input type="password" class="api-input" placeholder="Enter Finnhub key..." id="key-finnhub"></div>
                    </div>
                    <div class="api-input-group">
                        <label class="api-input-label">OpenAI API Key</label>
                        <div class="api-input-wrapper"><input type="password" class="api-input" placeholder="sk-..." id="key-openai"></div>
                    </div>
                    <div class="api-input-group">
                        <label class="api-input-label">Gemini API Key</label>
                        <div class="api-input-wrapper"><input type="password" class="api-input" placeholder="Enter Gemini key..." id="key-gemini"></div>
                    </div>
                </div>

                <button class="action-btn" style="width:100%; border-color:var(--accent-green); color:var(--accent-green); font-weight:600; height:40px;" onclick="saveSettings()">Save & Close</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="alertsModal" onclick="if(event.target === this) toggleAlerts()">
        <div class="settings-modal">
            <div class="modal-header">
                <h3 style="font-size:1rem; font-weight:600; display:flex; gap:10px; align-items:center;">
                    <i data-lucide="bell"></i> System Alerts
                </h3>
                <button class="action-btn" onclick="toggleAlerts()"><i data-lucide="x"></i></button>
            </div>
            
            <div class="modal-body">
                <div class="alert-item">
                    <i data-lucide="alert-triangle" class="alert-icon"></i>
                    <div class="alert-content">
                        <h4>Volatility Spike Detected</h4>
                        <p>Market sentiment volatility index crossed 85. High probability of rapid price action in compute futures.</p>
                        <div class="alert-time">2 mins ago</div>
                    </div>
                </div>
                <div class="alert-item">
                    <i data-lucide="server" class="alert-icon" style="color:var(--accent-orange)"></i>
                    <div class="alert-content">
                        <h4>API Latency Warning</h4>
                        <p>GNews data stream experiencing 400ms delay. Switching to redundant nodes.</p>
                        <div class="alert-time">15 mins ago</div>
                    </div>
                </div>
                 <div class="alert-item">
                    <i data-lucide="shield-alert" class="alert-icon" style="color:var(--accent-blue)"></i>
                    <div class="alert-content">
                        <h4>New Policy Document</h4>
                        <p>Nexus Crawler indexed "EU AI Act - Annex II" updates. Analysis pending.</p>
                        <div class="alert-time">1 hour ago</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
